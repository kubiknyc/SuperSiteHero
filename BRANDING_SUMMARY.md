# JobSight Branding - Implementation Summary

## âœ… What's Been Completed

### 1. Centralized PDF Branding System
**Created:** [`src/lib/utils/pdfBranding.ts`](src/lib/utils/pdfBranding.ts)

A powerful, reusable branding utility that provides:
- GC company logo and contact info headers
- "Powered by JobSightApp.com" footers on every page
- Easy integration with all PDF export functions

### 2. Example Implementation
**Updated:** [`src/features/daily-reports/utils/pdfExportV2.ts`](src/features/daily-reports/utils/pdfExportV2.ts)

Daily Reports V2 now features:
- GC company logo at top of every report
- Company name, address, phone, email displayed
- "Powered by JobSightApp.com" footer on all pages
- Professional document type banner

### 3. Application Rebranding
**Updated Files:**
- âœ… [`package.json`](package.json) - Name changed to "jobsight"
- âœ… [`index.html`](index.html) - Already had "JobSight" branding
- âœ… [`vite.config.ts`](vite.config.ts) - PWA manifest already correct

## ðŸ“‹ What Needs To Be Done

### Remaining PDF Export Files (13 files)
These files need the same updates as Daily Reports V2:

1. Change Orders - `src/features/change-orders/utils/pdfExport.ts`
2. Checklists - `src/features/checklists/utils/pdfExport.ts`
3. Cost Estimates - `src/features/cost-estimates/utils/pdfExport.ts`
4. Daily Reports V1 - `src/features/daily-reports/utils/pdfExport.ts`
5. Lien Waivers - `src/features/lien-waivers/utils/pdfExport.ts`
6. Payment Applications - `src/features/payment-applications/utils/pdfExport.ts`
7. RFIs - `src/features/rfis/utils/pdfExport.ts`
8. Submittals - `src/features/submittals/utils/pdfExport.ts`
9. Schedule - `src/features/schedule/utils/schedulePdfExport.ts`

### Update Pattern (Simple 6 Steps)

For each PDF export file:

1. **Import branding utilities**
   ```typescript
   import { addDocumentHeader, addFootersToAllPages, getCompanyInfo, type CompanyInfo } from '@/lib/utils/pdfBranding';
   ```

2. **Add `projectId` to options interface**
   ```typescript
   export interface GeneratePDFOptions {
     // ... existing fields
     projectId: string; // ADD THIS
     gcCompany?: CompanyInfo; // ADD THIS (optional)
   }
   ```

3. **Fetch company info in generate function**
   ```typescript
   const companyInfo = gcCompany || (await getCompanyInfo(projectId));
   ```

4. **Replace header code** with:
   ```typescript
   let yPos = await addDocumentHeader(doc, {
     gcCompany: companyInfo,
     documentTitle: 'Your Doc Title',
     documentType: 'YOUR DOC TYPE',
   });
   ```

5. **Replace footer code** with:
   ```typescript
   addFootersToAllPages(doc);
   ```

6. **Update calling components** to pass `projectId`

### Implement Company Info Fetching
**Update:** The `getCompanyInfo()` function in [`src/lib/utils/pdfBranding.ts`](src/lib/utils/pdfBranding.ts) at line 269

Currently returns placeholder data. Needs to:
- Fetch company info from projects/companies tables
- Load company logo from Supabase Storage
- Convert logo to base64 for PDF embedding

## ðŸ“– Full Documentation

See [`JOBSIGHT_BRANDING_IMPLEMENTATION.md`](JOBSIGHT_BRANDING_IMPLEMENTATION.md) for:
- Complete step-by-step guide
- Code examples for each step
- Testing checklist
- Database schema requirements
- Troubleshooting guide
- Visual layout references

## ðŸŽ¯ Quick Start for Next Developer

To update an RFI PDF export (example):

1. Open `src/features/rfis/utils/pdfExport.ts`

2. Add imports at top:
   ```typescript
   import { addDocumentHeader, addFootersToAllPages, getCompanyInfo, type CompanyInfo } from '@/lib/utils/pdfBranding';
   ```

3. Add to interface:
   ```typescript
   projectId: string;
   gcCompany?: CompanyInfo;
   ```

4. In generate function:
   ```typescript
   const companyInfo = gcCompany || (await getCompanyInfo(projectId));
   let yPos = await addDocumentHeader(doc, {
     gcCompany: companyInfo,
     documentTitle: `RFI #${rfi.number}`,
     documentType: 'REQUEST FOR INFORMATION',
   });
   // ... your content sections
   addFootersToAllPages(doc);
   ```

5. Update calling component to pass `projectId`

6. Test PDF generation

## ðŸ“Š Progress Tracker

- [x] Create branding utility
- [x] Update Daily Reports V2
- [x] Update package.json
- [x] Update PWA manifest
- [x] Create documentation
- [ ] Update Change Orders PDF
- [ ] Update Checklists PDF
- [ ] Update Cost Estimates PDF
- [ ] Update Daily Reports V1 PDF
- [ ] Update Lien Waivers PDF
- [ ] Update Payment Applications PDF
- [ ] Update RFIs PDF
- [ ] Update Submittals PDF
- [ ] Update Schedule PDF
- [ ] Implement company info fetching
- [ ] Update all calling components
- [ ] Test all PDF exports

## ðŸŽ¨ Result

Every PDF generated by JobSight will show:

**Header:**
```
[GC Logo]                    Company Name
                             123 Main Street
                             Tel: (555) 123-4567
                             info@company.com
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         DOCUMENT TYPE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

**Footer (on every page):**
```
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Page 1 of 3    Generated: Dec 15, 2025    Powered by JobSightApp.com
```

---

**Questions?** See the full implementation guide: [`JOBSIGHT_BRANDING_IMPLEMENTATION.md`](JOBSIGHT_BRANDING_IMPLEMENTATION.md)
