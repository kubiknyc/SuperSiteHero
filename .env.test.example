# =============================================================================
# Test Environment Configuration
# =============================================================================
# Copy this file to .env.test and fill in the values for your test environment.
# NEVER commit .env.test with real credentials to version control.
# =============================================================================

# =============================================================================
# Supabase Connection
# =============================================================================
# Your Supabase project URL (use a dedicated test project, NOT production!)
VITE_SUPABASE_URL=https://your-test-project.supabase.co

# Supabase anonymous/public key
VITE_SUPABASE_ANON_KEY=your-anon-key-here

# =============================================================================
# Service Role Key (Admin API)
# =============================================================================
# Required for:
# - Magic link generation without email delivery
# - Creating/deleting test users programmatically
# - Database reset in remote mode
#
# SECURITY: Keep this secret! Never expose in client-side code.
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# =============================================================================
# Test User Credentials
# =============================================================================
# Default test user (general authenticated access)
TEST_USER_EMAIL=test@e2e.test.local
TEST_USER_PASSWORD=TestUser123!

# Admin role test user
TEST_ADMIN_EMAIL=admin@e2e.test.local
TEST_ADMIN_PASSWORD=AdminTest123!

# Project Manager role test user
TEST_PM_EMAIL=pm@e2e.test.local
TEST_PM_PASSWORD=PMTest123!

# Superintendent role test user
TEST_SUPER_EMAIL=super@e2e.test.local
TEST_SUPER_PASSWORD=SuperTest123!

# Subcontractor role test user
TEST_SUB_EMAIL=sub@e2e.test.local
TEST_SUB_PASSWORD=SubPassword123!

# =============================================================================
# MFA/TOTP Testing
# =============================================================================
# Base32 TOTP secret for MFA testing (generate a new one for your test user)
# You can generate one at: https://www.google.com/search?q=base32+generator
TEST_TOTP_SECRET=JBSWY3DPEHPK3PXP

# =============================================================================
# Test Mode Configuration
# =============================================================================
# Database mode: 'local' (Supabase CLI) or 'remote' (dedicated test project)
# Local mode uses port 54322 by default, remote uses VITE_SUPABASE_URL
MODE=local

# Application environment
VITE_APP_ENV=test
NODE_ENV=test

# =============================================================================
# Server Configuration
# =============================================================================
# Port for the test server (default: 5173)
PORT=5173

# Base URL for E2E tests
BASE_URL=http://localhost:5173

# =============================================================================
# Debug Options
# =============================================================================
# Enable verbose logging
DEBUG=false

# Keep browser open after tests (for debugging)
PWDEBUG=0

# =============================================================================
# CI/CD Configuration
# =============================================================================
# Set to true when running in CI environment
CI=false

# Playwright test workers (default: undefined for local, 1 for CI)
# PLAYWRIGHT_WORKERS=1

# =============================================================================
# Safety Checks
# =============================================================================
# These patterns will prevent the autonomous tests from running against
# production environments. Add your production URL patterns here.
PRODUCTION_URL_PATTERNS=prod,production,live,www

# =============================================================================
# Notes
# =============================================================================
# 1. For LOCAL mode:
#    - Start Supabase locally: npx supabase start
#    - The harness will use the local Supabase instance on port 54322
#
# 2. For REMOTE mode:
#    - Use a DEDICATED test project, never production
#    - The harness will validate the URL doesn't match production patterns
#    - Database reset will truncate test data tables only
#
# 3. Test users:
#    - Run npm run seed:test-users to create test users
#    - Or the harness will create them automatically with the Admin API
#
# 4. MFA testing:
#    - The TEST_TOTP_SECRET must match the secret enrolled for the test user
#    - Use otplib to generate time-based codes during tests
